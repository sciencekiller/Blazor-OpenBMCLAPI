@namespace Blazor_OpenBMCLAPI
@inject Toolbelt.Blazor.I18nText.I18nText I18nText
@inherits LayoutComponentBase

<AntDesign.ProLayout.BasicLayout Logo="@("https://devblogs.microsoft.com/aspnet/wp-content/uploads/sites/16/2019/04/BrandBlazor_nohalo_1000x.png")"
                                 Title="OpenBMCLAPI"
                                 MenuData="_menuData">
    <RightContentRender>
    </RightContentRender>
    <ChildContent>
        @Body
    </ChildContent>
    <FooterRender>
        <FooterView Copyright="2024 Sciencekill " Links="Links"></FooterView>
    </FooterRender>
</AntDesign.ProLayout.BasicLayout>
<SettingDrawer />

@code {
    I18nText.global i18n = new I18nText.global();
    protected override async Task OnInitializedAsync()
    {
        Trace.WriteLine(await Shared.Database.CheckUser());
        i18n = await I18nText.GetTextTableAsync<I18nText.global>(this);
        RefreshMenuLanguage();

    }
    internal void RefreshMenuLanguage()
    {
        _menuData[0].Name = i18n["dashboard"];
        _menuData[1].Name = i18n["profile"];
        _menuData[2].Name = i18n["settings"];
        _menuData[1].Children[0].Name = i18n["cluster"];
    }
    private readonly MenuDataItem[] _menuData =
    {
        new MenuDataItem
        {
            Path = "/",
            Name = "Dashboard",
            Key = "dashboard",
            Icon = "home",
        },
        new MenuDataItem
        {
            Name = "Profile",
            Key = "profile",
            Icon = "file",
            Children=new MenuDataItem[]
            {
                new MenuDataItem
                {
                    Path = "/cluster",
                    Name = "Cluster",
                    Key = "cluster"
                },
            }
        },
        new MenuDataItem
        {
            Path = "/settings",
            Name = "Settings",
            Key = "settings",
            Icon = "setting",
        }
    };

    public LinkItem[] Links { get; set; } =
    {
        new LinkItem
        {
            Key = "Ant Design Blazor",
            Title = "Ant Design Blazor",
            Href = "https://antblazor.com",
            BlankTarget = true,
        },
        new LinkItem
        {
            Key = "github",
            Title = (RenderFragment)(@<Icon Type="github" />),
            Href = "https://github.com/sciencekiller",
            BlankTarget = true,
        },
        new LinkItem
        {
            Key = "Blazor",
            Title = "Blazor",
            Href = "https://dotnet.microsoft.com/apps/aspnet/web-apps/blazor?WT.mc_id=DT-MVP-5003987",
            BlankTarget = true,
        },
        new LinkItem
        {
            Key = "Sciencekill",
            Title = "Sciencekill",
            Href = "https://sciencekill.online",
            BlankTarget = true,
        }
    };
}